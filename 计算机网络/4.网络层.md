# 4.网络层

### IP地址
- IP-v4 32位: 网络号(net-id)字段 + 主机号(host-id)字段;
- 主机号部分不能全为0(代表网段), 也不能全为1(代表广播, 网络中所有计算机都能收到这个数据包);
- 根据网络号字段区分 A、B、C 类地址;

#### A、B、C 类地址区分
- IPV4 前8位共有 2^8 个: 0~255;
- A类(前8位二进制: 0...): 0~126(127 为本机地址) + 24位 host-id;
- B类(前8位二进制: 10...): 128~191 + 16位 host-id;
- C类(前8位二进制: 110...): 192~223 + 8位 host-id;
- D类(前8位二进制: 1110...):224~240;

### 子网掩码
- 作用: 和 IP地址 做 与运算, 获得网络号(net-id);
- 与 IP 做二进制与运算, 判断两台计算机是否在一个网段, 如果在一个网段则直接发起请求, 否则通过网关发起请求到目标地址;
```
IP: 		  172.16.122.204
子网掩码: 255.255.0.0
做二进制与运算得到网络号: 172.16.0.0, 主机位归零 
```

### 子网划分
- 子网也可以分成多个网段;
- 遵循除2的原则;

### 超网
- 将多个网段合并成一个;
- 通过设置子网掩码实现;
```
/*
* 一个C类地址, 网段最多 255 个地址, 此时需要将 400台机器设置成一个网段
*/
-- 将 192.168.0.0 和 192.168.0.1 合并
子网掩码: 255.255.254.0
对应二进制: 11111111 11111111 11111110 00000000  
和 IP 做与运算得到网络号, 将两个网段合并到 192.168.0.0 网段
```